const chatTextarea=document.querySelector(".chat__textarea"),chatTextareaComputed=getComputedStyle(chatTextarea),chatDefaultTextareaHeight=chatTextareaComputed.height,chat=document.querySelector(".chat"),chatHeader=document.querySelector(".chat__header");chat.addEventListener("click",e=>{var t=e.target,e=t==chatHeader||chatHeader.contains(t),t=t==document.querySelector(".chat__close-btn");e?chat.classList.add("chat--active"):t&&chat.classList.remove("chat--active")}),chatTextarea.addEventListener("keyup",()=>{0<chatTextarea.scrollTop?chatTextarea.style.height=chatTextarea.scrollHeight+"px":chatTextarea.scrollHeight>parseInt(chatTextareaComputed.maxHeight)?chatTextarea.style.overflowY="scroll":""==chatTextarea.value&&(chatTextarea.style.height=chatDefaultTextareaHeight)});let chatMessagesField=document.querySelector(".chat__messages"),chatSendBtn=document.querySelector(".chat__btn");const webSocket=new WebSocket("ws://localhost:8081");webSocket.onmessage=e=>{e=JSON.parse(e.data);chatMessagesField.innerHTML+='<div class="chat__message chat__message--server">'+e.message+"</div>"},chatSendBtn.addEventListener("click",e=>{e.preventDefault();e=chatTextarea.value;""!=e&&(webSocket.send(JSON.stringify({message:e})),chatMessagesField.innerHTML+='<div class="chat__message chat__message--client">'+e+"</div>",chatTextarea.value="")});